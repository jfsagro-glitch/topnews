# üî¥ DeepSeek API 400 Bad Request - Diagnostic Report

## –ü—Ä–æ–±–ª–µ–º–∞
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ DeepSeek API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **HTTP 400 Bad Request**:
```
2026-02-03T09:21:37 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/v1/chat/completions "HTTP/1.1 400 Bad Request"
2026-02-03T09:21:37 - net.deepseek_client - WARNING - DeepSeek text extraction API error: status=400
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: **"–ò–ò –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–µ—Ä–µ—Å–∫–∞–∑–∞"** (AI summarization unavailable)

---

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ü—Ä–∏—á–∏–Ω–∞
**`DEEPSEEK_API_KEY` environment variable is NOT set in Railway deployment**

–ö–æ–≥–¥–∞ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Railway:
1. `DEEPSEEK_API_KEY` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ ‚Üí –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
2. API –∫–ª—é—á –ø—É—Å—Ç ‚Üí `Authorization: Bearer ` (–±–µ–∑ –∫–ª—é—á–∞)
3. DeepSeek –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å 400 –æ—à–∏–±–∫–æ–π

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å API –ö–ª—é—á –≤ Railway

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å DeepSeek API Key
1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://platform.deepseek.com
2. –í–æ–π–¥–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π)
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **API Keys** / **–ö–ª—é—á–∏ API**
4. –ù–∞–∂–º–∏ **Create New Key** / **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á**
5. –°–∫–æ–ø–∏—Ä—É–π –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`)

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –≤ Railway
1. –û—Ç–∫—Ä–æ–π Railway Dashboard ‚Üí –¢–≤–æ–π –ø—Ä–æ–µ–∫—Ç TopNews
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **Variables** / **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
3. –î–æ–±–∞–≤—å –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Name**: `DEEPSEEK_API_KEY`
   - **Value**: `sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - (–≤—Å—Ç–∞–≤—å —Å–≤–æ–π –∫–ª—é—á)
4. –ù–∞–∂–º–∏ **Save**
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
1. –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
2. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ—Å–∫–∞–∑ –Ω–æ–≤–æ—Å—Ç–∏ –≤ Telegram –±–æ—Ç–µ
3. –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!

---

## üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export DEEPSEEK_API_KEY="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# 2. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç
python test_deepseek_api.py
```

–î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úì API Key status:
  - Exists: True
  - Length: 48
  - Starts with: sk-...

‚úì Testing API endpoint: https://api.deepseek.com/v1/chat/completions
‚úì Response status: 200
‚úÖ API is working!
```

---

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –õ–æ–≥–∞—Ö

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞ –≤ Railway, –ª–æ–≥–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:

**‚ùå –ü–ï–†–ï–î (—Å –æ—à–∏–±–∫–æ–π):**
```
2026-02-03 09:21:37 - net.deepseek_client - WARNING - DeepSeek API error: status=400, response="error"...
```

**‚úÖ –ü–û–°–õ–ï (—Ä–∞–±–æ—Ç–∞–µ—Ç):**
```
2026-02-03 09:22:00 - bot - INFO - Published: –†–∞—Å–∫—Ä—ã—Ç—ã –¥–µ—Ç–∞–ª–∏ –Ω–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–Ω–æ–≥–æ —É–¥–∞—Ä–∞...
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ü—Ä–æ–≤–µ—Ä–∫–∏

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞ –æ—à–∏–±–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ?
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
- –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`
- –î–ª–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ~48 —Å–∏–º–≤–æ–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Railway –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è?
- –ü–µ—Ä–µ–π–¥–∏ –≤ **Deployments** –≤ Railway
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–æ–≤–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –Ω–∞–∂–º–∏ **Redeploy** –≤—Ä—É—á–Ω—É—é

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ë–∞–ª–∞–Ω—Å –≤ DeepSeek?
- –ü—Ä–æ–≤–µ—Ä—å –Ω–∞ https://platform.deepseek.com/account/balance
- API –∫–ª—é—á –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –±–∞–ª–∞–Ω—Å–∞
- –î–æ–±–∞–≤—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## üìã –ò—Ç–æ–≥–æ–≤—ã–π –ß–µ–∫–ª–∏—Å—Ç

- [ ] –ü–æ–ª—É—á–∏–ª API –∫–ª—é—á —Å deepseek.com
- [ ] –î–æ–±–∞–≤–∏–ª `DEEPSEEK_API_KEY` –≤ Railway Variables
- [ ] Railway –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è (–Ω–æ–≤–æ–µ deployment)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–µ—Å–∫–∞–∑ –≤ Telegram –±–æ—Ç–µ
- [ ] AI –ø–µ—Ä–µ—Å–∫–∞–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç DeepSeek

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã?

–ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å Railway –ª–æ–≥–∏ (–≤–∫–ª–∞–¥–∫–∞ **Logs**)
2. –ò—â–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `DeepSeek API key not configured`
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ **Variables**
